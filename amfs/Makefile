AMFS_VERSION="0.1"
ccflags-y := -std=gnu99 -Wno-declaration-after-statement
EXTRA_CFLAGS += -DAMFS_VERSION=\"$(AMFS_VERSION)\"

obj-m += amfs.o

amfs-y := dentry.o file.o inode.o main.o super.o lookup.o mmap.o

all: amfs ioctl
amfs: 
	make -Wall -Werror -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

ioctl:
	gcc amfsctl.c -o amfsctl
